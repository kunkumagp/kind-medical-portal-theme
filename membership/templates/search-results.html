<!--
  templateType: page
  isAvailableForNewContent: true
  label: Kind Medical - search results
  screenshotPath: ../../images/template-previews/search-results.png

-->

{% extends './layouts/base-member-green-footer.html' %}
{{ require_css(get_asset_url("../css/templates/search.css")) }} 

{% block body %}

{% set query_string = request.query %}
{% set parameters = query_string.split('&') %}
{% set tableIds = [] %}

{% for param in parameters %}
  {% if "tableId=" in param %}
    {% set tableId = param.split('=')[1] %}
    {% do tableIds.append(tableId) %}
  {% endif %}
{% endfor %}

{% set keyword = request.query_dict.term %}
{% set queryparams = "description__icontains=" ~ keyword %}
{# {% set queryparams = "product_name__icontains=" ~ keyword %} #}


{# {% set table = hubdb_table_rows(11587680, query) %} #}
{# {% set keyword = request.query_dict.term|escape %} #}

<main class="body-container-wrapper search-body">
  <section class="content-wrapper">
    <div class="systems-page search-result-page">
      
      <div class="search-result-heading">
        <h3>Results for "{{ keyword }}"</h3>
        <div>
          {% module "module_170624619977615" path="../modules/main_search_input", label="main_search_input" %}
        </div>
      </div>

      
{#       {% if tableIds|length > 0 %}
        {% for id in tableIds %}
          {% set table = hubdb_table_rows(id|int, queryparams) %}

            {% for row in table %}
              {{row.description}}
            {% endfor %}
          {% endfor %}
      {% endif %} #}
      
      
      
      {% dnd_area 'dnd_area' class='body-container body-container--home search-result-area', label='Search result section' %}
      
        {% dnd_section 
          padding={
            'default':{'top':0, 'bottom':0, 'left':0, 'right':0},
            'mobile':{'top':0, 'bottom':0, 'left':0, 'right':0}
          }
        %}
          {% dnd_column
            offset=0,
            width=12
          %}
            {% dnd_row %}
              {% dnd_module
                path="../modules/member/search-results",
                offset=0,
                width=12
              %}
              {% end_dnd_module %}
            {% end_dnd_row %}
          {% end_dnd_column %}
        {% end_dnd_section %}

      {% end_dnd_area %}
      
    </div>
  </section>
</main>
{% endblock body %}